HFA/ASMrc Specification v0.2

1. 概要（Overview）

HFA/ASMrc（Hierarchical Face Assembly / ASMrc）は、 特定のプログラミング言語を実行するための言語仕様ではなく、

> あらゆるプログラム言語に内在する「意味」を、 最小限の要素で記述・保存・比較するための互換仕様層



として定義される。

v0.2 では、v0.1 で定義された実験的言語仕様としての側面を維持しつつ、 意味互換（Semantic Compatibility）を主目的とする仕様を正式に追加する。


---

2. 目的（Purpose）

本仕様の目的は以下に限定される。

異なるプログラム言語間で

状態

状態遷移

時間進行

副作用

観測可能性



を、共通の意味単位で表現すること。

HFA/ASMrc は以下を目的としない。

実行性能の保証

完全な動作再現

特定言語仕様の代替

単一万能プログラミング言語の提供



---

3. 基本概念（Core Concepts）

3.1 状態（State）

状態とは、ある時点におけるプログラムの意味的配置を表す抽象的集合である。

状態は以下を含み得る：

内部情報（変数、メモリ、環境）

外部との関係（I/O、環境依存要素）

実行可能性


HFA/ASMrc において、状態は実装を持たない概念として扱われる。


---

3.2 遷移（Transition）

遷移とは、

> ある状態から別の状態への意味的変化



である。

1命令 = 1遷移

遷移は成功・失敗を内包し得る

遷移が存在しない場合も定義可能



---

3.3 時間（Time）

時間とは、遷移の順序性を保証する抽象概念である。

実時間とは一致しない

並列・非同期は順序化された遷移列として表現される

同一時間内に複数遷移が存在してもよい



---

3.4 観測（Observe）

観測とは、

> 状態または遷移の一部を外部から認識可能にする行為



である。

観測は以下を含むが、これに限定されない。

出力

ログ

例外

返り値



---

3.5 副作用（Effect）

副作用とは、

> 観測可能な状態変化



を指す。

HFA/ASMrc では、副作用の有無のみを意味として扱い、 内容の詳細は Adapter に委ねられる。


---

4. ZERO 状態（Compatibility ZERO）

4.1 定義

ZERO 状態とは、

> 能力・意味・遷移可能性は存在するが、 それを意図的に確定・行使しない状態



である。


---

4.2 v0.2 における ZERO の役割

v0.2 では、ZERO 状態を以下の用途に拡張定義する。

他言語との意味対応が未確定な場合

意味が失われる可能性がある場合

実装依存・未定義動作を含む場合


ZERO は エラーではない。

ZERO は

> 意味の保留



である。


---

5. 命令の意味（Instruction as Semantic Tag）

HFA/ASMrc における命令は、

実行命令ではない

処理の指示でもない


命令は、

> 状態遷移に付与される意味タグ



として定義される。

顔文字命令は、

人間可読

構文非依存

言語非依存


な意味表現である。


---

6. 意味ログ（Semantic Log）

HFA/ASMrc プログラムとは、

> 状態遷移と意味タグの時系列記録



である。

このログは以下の用途を想定する。

言語間意味比較

動作検証

再解釈

教育・説明



---

7. Adapter 規約（Adapter Responsibility）

7.1 Adapter の役割

Adapter は、

元言語の構文・実行を解析し

意味を抽出し

HFA/ASMrc 表現へ記録する


責務を持つ。


---

7.2 意味欠損の扱い

意味が完全に保存できない場合、

明示的に ZERO 状態へ遷移させる

暗黙的な補完を行ってはならない



---

8. 非目標（Non-Goals）

HFA/ASMrc は以下を保証しない。

元言語との完全互換

性能特性の一致

並列性の忠実再現

実装依存挙動の標準化



---

9. 位置付け（Positioning）

HFA/ASMrc は、

LLVM IR でも

WebAssembly でも

仮想マシンでもない


HFA/ASMrc は、

> プログラム言語を理解するための最小意味仕様



である。


---

10. 結語

HFA/ASMrc v0.2 は、

> 「すべてのプログラム言語を一つにする」ための仕様ではない。



HFA/ASMrc v0.2 は、

> 「すべてのプログラム言語が、 同じ地面に立つための仕様」である。




---

定義初出：2025 作成者：大野実